<!DOCTYPE html>
    <html>
    <head>
        <title>Система обработки видео</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .container { display: flex; }
            .video { flex: 2; }
            .controls { flex: 1; padding: 20px; }
            button { margin: 5px; padding: 10px; cursor: pointer; }
            .active { background-color: #4CAF50; color: white; }
        </style>
    </head>
    <body>
        <h1>Система обработки видео</h1>
        <div class="container">
            <div class="video">
                <img src="/video_feed" width="100%">
            </div>
            <div class="controls">
                <h3>Выбор метода обработки:</h3>
                <button onclick="setMethod('pose')" id="btn-pose">Только поза</button>
                <button onclick="setMethod('action')" id="btn-action" class="active">Действия</button>
                <button onclick="setMethod('emotion')" id="btn-emotion">Эмоции</button>
                <button onclick="setMethod('full')" id="btn-full">Полная обработка</button>
            </div>
        </div>
        
        <script>
            // Функция для установки метода обработки
            function setMethod(method) {
                fetch('/set_method', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({method: method}),
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        // Обновление активной кнопки
                        document.querySelectorAll('button').forEach(btn => {
                            btn.classList.remove('active');
                        });
                        document.getElementById('btn-' + method).classList.add('active');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
            
            // Получение доступных методов при загрузке страницы
            window.onload = function() {
                fetch('/get_available_methods')
                .then(response => response.json())
                .then(data => {
                    console.log('Available methods:', data.methods);
                });
            };
        </script>
    </body>
    </html>